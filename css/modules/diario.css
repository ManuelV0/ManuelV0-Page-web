/* =========================================================
   08 — DIARIO (Responsive + Gating + Matchmaking)
   Dipendenze: 01-tokens.css (variabili), 02-base.css (reset)
   ========================================================= */

/* ---------- Shell / hero ---------- */
.diario-shell {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--spazio-sm);
  display: grid;
  gap: var(--spazio-md);
}

.diario-hero {
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  box-shadow: var(--ombra-card);
  padding: clamp(16px, 3vw, 28px);
}
.diario-hero h1 {
  font-family: var(--font-heading);
  font-weight: 800;
  color: var(--c-primario);
  font-size: clamp(1.25rem, 2.6vw, 1.8rem);
  margin-bottom: .35rem;
}
.diario-hero p { color: var(--c-testo-leggero); }

/* ---------- Toolbar (search + filter) ---------- */
.diario-toolbar {
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  padding: var(--spazio-sm);
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spazio-sm);
}
.diario-toolbar .search-input,
.diario-toolbar .filter-select {
  width: 100%;
  padding: .8rem .9rem;
  border: 1px solid var(--c-bordi);
  border-radius: 12px;
  background: var(--c-superficie);
  color: var(--c-testo);
  transition: var(--transizione);
}
.diario-toolbar .search-input:focus,
.diario-toolbar .filter-select:focus {
  border-color: var(--c-primario);
  box-shadow: 0 0 0 3px rgba(76,175,80,.15);
}

/* ---------- Gating (“login richiesto”) ---------- */
.diario-gate {
  background: var(--c-superficie);
  border: 1px dashed var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  padding: clamp(16px, 3vw, 28px);
  display: grid;
  gap: var(--spazio-sm);
  text-align: center;
}
.diario-gate h3 { font-family: var(--font-heading); color: var(--c-primario); }
.diario-gate p { color: var(--c-testo-leggero); }
.diario-gate .gate-actions {
  display: flex; flex-wrap: wrap; gap: .6rem; justify-content: center;
}

/* ---------- Griglia autori ---------- */
.authors-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spazio-md);
}

/* ---------- Card autore ---------- */
.author-card {
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  box-shadow: var(--ombra-card);
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.author-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--ombra-intensa);
  border-color: color-mix(in oklab, currentColor 18%, transparent);
}
.author-card__header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: var(--spazio-sm);
  padding: var(--spazio-md);
}
.author-card__avatar {
  width: 56px; height: 56px; border-radius: 50%;
  background: #eee center/cover no-repeat;
  border: 1px solid var(--c-bordi);
}
.author-card__name {
  font-family: var(--font-heading);
  font-weight: 800;
  font-size: 1.1rem;
  color: var(--c-testo);
  line-height: 1.2;
  margin-bottom: 4px;
}
.author-card__id { font-size: .75rem; color: var(--c-testo-leggero); word-break: break-all; }
.author-card__badges { display: flex; gap: 6px; align-items: center; }
.badge {
  font-size: .72rem; font-weight: 700; padding: 4px 8px;
  border-radius: 999px; border: 1px solid var(--c-bordi);
  color: var(--c-testo-leggero); background: #fff;
}

.author-card__meta {
  display: grid; grid-template-columns: 1fr auto;
  gap: var(--spazio-sm); padding: 0 var(--spazio-md); color: var(--c-testo-leggero);
  font-size: .9rem;
}
.author-card__meta .meta-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.author-card__meta .meta-pill {
  background: #f7f7f7; border: 1px solid var(--c-bordi); color: var(--c-testo);
  border-radius: 999px; padding: 4px 10px; font-size: .8rem;
}

.journal-preview {
  padding: var(--spazio-md);
  border-top: 1px dashed var(--c-bordi);
  color: var(--c-testo);
}
.journal-preview__text {
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;
  overflow: hidden; color: var(--c-testo-leggero);
}

.author-card__footer {
  display: flex; align-items: center; justify-content: space-between; gap: var(--spazio-sm);
  padding: var(--spazio-md); border-top: 1px solid var(--c-bordi); background: #fcfcfc;
}
.author-card__actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.btn {
  padding: .6rem .9rem; border-radius: 10px;
  border: 1px solid var(--c-bordi); background: var(--c-superficie);
  color: var(--c-testo); font-weight: 700; font-size: .92rem; cursor: pointer;
  transition: var(--transizione);
}
.btn:hover { border-color: var(--c-primario); color: var(--c-primario); }
.btn--primary { background: var(--c-primario); color: #fff; border-color: transparent; }
.btn--primary:hover { background: var(--c-primario-hover); }

.author-card__qr {
  width: 64px; height: 64px; border: 1px solid var(--c-bordi); border-radius: 8px;
  background: #fff center/contain no-repeat; flex: 0 0 64px;
}

/* Dettagli espandibili */
.journal-details {
  max-height: 0; opacity: 0; overflow: hidden;
  transition: max-height .45s ease, opacity .25s ease;
  border-top: 1px solid var(--c-bordi); background: #fff;
}
.journal-details.is-open { max-height: 1200px; opacity: 1; }
.journal-details__inner { padding: var(--spazio-md); display: grid; gap: var(--spazio-md); }
.journal-block {
  background: #fafafa; border: 1px solid var(--c-bordi);
  border-radius: 12px; padding: var(--spazio-md);
}
.journal-block h4 {
  font-family: var(--font-heading); font-size: 1rem; color: var(--c-primario); margin-bottom: .5rem;
}
.journal-tags { display: flex; flex-wrap: wrap; gap: 8px; }
.journal-tag {
  font-size: .78rem; padding: 4px 8px; border: 1px solid var(--c-bordi);
  border-radius: 999px; background: #fff; color: var(--c-testo-leggero);
}

/* Empty / Error */
.diario-empty, .diario-error {
  display: grid; place-items: center; min-height: 160px;
  border: 2px dashed var(--c-bordi); border-radius: 12px; color: var(--c-testo-leggero);
}

/* ---------- Matchmaking (stub UI) ---------- */
.mm-section {
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  box-shadow: var(--ombra-card);
  padding: var(--spazio-md);
  display: grid; gap: var(--spazio-sm);
}
.mm-header {
  display: flex; align-items: center; justify-content: space-between; gap: var(--spazio-sm);
}
.mm-title {
  font-family: var(--font-heading); font-weight: 800; color: var(--c-secondario);
  font-size: clamp(1.05rem, 2.2vw, 1.3rem);
}
.mm-grid {
  display: grid; grid-template-columns: 1fr; gap: var(--spazio-sm);
}
.mm-card {
  border: 1px solid var(--c-bordi);
  border-radius: 12px;
  padding: var(--spazio-sm);
  display: grid; gap: .4rem;
  background: #fff;
}
.mm-card strong { color: var(--c-testo); }
.mm-tags { display: flex; flex-wrap: wrap; gap: 6px; }
.mm-tag {
  font-size: .72rem;
  border: 1px solid var(--c-bordi);
  border-radius: 999px;
  padding: 3px 8px;
  color: var(--c-testo-leggero);
  background: #fff;
}

/* ---------- Skeleton ---------- */
.skel {
  background: linear-gradient(90deg, #eee 25%, #f6f6f6 37%, #eee 63%);
  background-size: 400% 100%;
  animation: skel 1.4s ease infinite;
  border-radius: 8px;
}
@keyframes skel { 0%{background-position:100% 50%} 100%{background-position:0 50%} }

/* ---------- Responsive ---------- */
@media (min-width: 600px) {
  .diario-toolbar { grid-template-columns: 1fr 220px; align-items: center; }
}

@media (min-width: 768px) {
  .authors-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .mm-grid      { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (min-width: 1024px) {
  .authors-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .mm-grid      { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

@media (min-width: 1440px) {
  .authors-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
}
