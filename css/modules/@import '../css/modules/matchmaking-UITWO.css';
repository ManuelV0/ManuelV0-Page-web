/* =========================================================
   13 — MATCHMAKING UI (Diario › suggerimenti & compatibilità)
   Dipendenze: 01-tokens.css, 02-base.css
   Naming: prefisso mm-
   Obiettivi: filtro, lista risultati, card compatibilità, stati
   ========================================================= */

/* ========== 1) SEZIONE & INTRO ==================================== */
.mm-section{
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  box-shadow: var(--ombra-card);
  padding: var(--spazio-md);
}

.mm-title{
  font-family: var(--font-heading);
  font-weight: 800;
  font-size: clamp(1.2rem,2.2vw,1.6rem);
  color: var(--c-primario);
  margin-bottom: .6rem;
}
.mm-subtitle{
  color: var(--c-testo-leggero);
  font-size: .95rem;
  margin-bottom: var(--spazio-md);
}

/* ========== 2) TOOLBAR FILTRI ===================================== */
.mm-toolbar{
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spazio-sm);
  margin-bottom: var(--spazio-md);
}

.mm-field{
  display: grid;
  gap: .35rem;
}
.mm-label{
  font-weight: 700;
  font-size: .86rem;
  color: var(--c-testo);
}
.mm-input, .mm-select, .mm-chip-input{
  width: 100%;
  padding: .7rem .85rem;
  border: 1px solid var(--c-bordi);
  border-radius: 12px;
  background: var(--c-superficie);
  color: var(--c-testo);
  transition: var(--transizione);
  font: inherit;
}
.mm-input:focus, .mm-select:focus, .mm-chip-input:focus{
  border-color: var(--c-primario);
  box-shadow: 0 0 0 3px rgba(76,175,80,.15);
  outline: none;
}

/* Chip tags (temi, stile) */
.mm-chips{
  display: flex; flex-wrap: wrap; gap: 6px; margin-top: .2rem;
}
.mm-chip{
  display: inline-flex; align-items: center; gap: 6px;
  padding: .35rem .6rem; border-radius: 999px;
  font-size: .78rem; border: 1px solid var(--c-bordi);
  background: #fff; color: var(--c-testo);
}
.mm-chip button{
  border: 0; background: none; cursor: pointer; color: var(--c-testo-leggero);
}
.mm-actions{
  display: flex; flex-wrap: wrap; gap: .5rem;
}

/* CTA */
.mm-btn{
  padding: .6rem .95rem; border-radius: 10px; border: 1px solid var(--c-bordi);
  background: var(--c-superficie); color: var(--c-testo); font-weight: 700; cursor: pointer;
  transition: var(--transizione);
}
.mm-btn:hover{ border-color: var(--c-primario); color: var(--c-primario); }
.mm-btn--primary{
  background: var(--c-primario); border-color: transparent; color: #fff;
}
.mm-btn--primary:hover{ background: var(--c-primario-hover); }

/* Stato bloccato (richiede login) */
.mm-toolbar.is-locked{ position: relative; }
.mm-toolbar.is-locked::after{
  content: 'Accedi per usare la ricerca e i suggerimenti';
  position: absolute; inset: 0; display: grid; place-items: center;
  background: rgba(255,255,255,.75); backdrop-filter: blur(2px);
  color: var(--c-testo-leggero); font-weight: 800; border-radius: 12px;
}

/* ========== 3) GRIGLIA RISULTATI ================================== */
.mm-grid{
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spazio-md);
}

/* ========== 4) CARD MATCH ========================================= */
.mm-card{
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--bordo-arrotondato);
  box-shadow: var(--ombra-card);
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.mm-card:hover{
  transform: translateY(-2px);
  box-shadow: var(--ombra-intensa);
  border-color: color-mix(in oklab, currentColor 18%, transparent);
}

/* header con compatibilità */
.mm-card__header{
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: var(--spazio-sm);
  align-items: center;
  padding: var(--spazio-md);
}
.mm-duo{
  display: flex; align-items: center; gap: .65rem;
}
.mm-avatar{
  width: 44px; height: 44px; border-radius: 50%;
  background: #eee center/cover no-repeat;
  border: 1px solid var(--c-bordi);
}
.mm-names{
  display: grid; gap: 2px;
}
.mm-name{
  font-weight: 800; color: var(--c-testo); font-size: .98rem;
}
.mm-meta{
  font-size: .8rem; color: var(--c-testo-leggero);
}

/* Compatibilità: meter con conic-gradient e variabile --score [0..1] */
.mm-compat{
  display: grid; place-items: center; gap: .35rem;
}
.mm-meter{
  --score: .72;                 /* default 72% se non sovrascritto inline */
  --base: #EAEAEA;
  --ok: var(--c-primario);
  width: 58px; height: 58px; border-radius: 50%;
  background:
    conic-gradient(var(--ok) calc(var(--score)*1turn), var(--base) 0);
  position: relative;
}
.mm-meter::after{
  content: attr(data-label);
  position: absolute; inset: 6px;
  background: #fff; border-radius: 50%;
  display: grid; place-items: center;
  font-weight: 800; font-size: .8rem; color: var(--c-testo);
  border: 1px solid var(--c-bordi);
}
.mm-compat small{ color: var(--c-testo-leggero); font-size: .75rem; }

/* corpo con temi in comune / motivazioni */
.mm-card__body{
  padding: 0 var(--spazio-md) var(--spazio-md);
  display: grid; gap: .6rem;
}
.mm-pill{
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 8px; border-radius: 999px;
  font-size: .78rem; color: var(--c-testo);
  border: 1px solid var(--c-bordi); background: #fafafa;
}

/* footer azioni */
.mm-card__footer{
  padding: var(--spazio-sm) var(--spazio-md);
  border-top: 1px solid var(--c-bordi);
  background: #fcfcfc;
  display: flex; flex-wrap: wrap; align-items: center; gap: .5rem;
  justify-content: space-between;
}

/* ========== 5) STATI =============================================== */
.mm-empty, .mm-error{
  display: grid; place-items: center;
  min-height: 140px; border: 2px dashed var(--c-bordi);
  border-radius: 12px; color: var(--c-testo-leggero);
}

/* skeleton shimmer */
.mm-skel{
  background: linear-gradient(90deg,#eee 25%,#f6f6f6 37%,#eee 63%);
  background-size: 400% 100%;
  animation: mmSkel 1.4s ease infinite;
  border-radius: 8px;
}
@keyframes mmSkel{
  0%{ background-position: 100% 50%; }
  100%{ background-position: 0 50%; }
}

/* ========== 6) RESPONSIVE ========================================== */
/* Tablet ≥768px: toolbar a 2–3 colonne, griglia 2 col */
@media (min-width: 768px){
  .mm-toolbar{
    grid-template-columns: repeat(3, minmax(0,1fr));
    align-items: end;
  }
  .mm-actions{ justify-content: flex-end; }
  .mm-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}

/* Laptop ≥1024px: toolbar 4 col, griglia 3 col */
@media (min-width: 1024px){
  .mm-toolbar{ grid-template-columns: repeat(4, minmax(0,1fr)); }
  .mm-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}

/* Desktop ≥1440px: griglia 4 col */
@media (min-width: 1440px){
  .mm-grid{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}

/* Riduzione movimento */
@media (prefers-reduced-motion: reduce){
  .mm-card{ transition: none !important; }
}
