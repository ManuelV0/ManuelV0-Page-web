/* 03-header.css — HEADER UNIFICATO (brand + hamburger + nav + azioni)
   Dipendenze: usa le variabili da 01-tokens.css e il reset da 02-base.css */

/* -----------------------------
   3.0 Layout base header
   ----------------------------- */
.main-header {
  position: sticky;
  top: 0;
  z-index: 1000;

  display: grid;
  grid-template-columns: 1fr auto 1fr; /* su mobile: brand a sinistra, nav/actions in blocchi */
  grid-auto-flow: row;
  row-gap: .25rem;

  padding: .6rem .9rem;
  background: var(--c-superficie);
  border-bottom: 1px solid var(--c-bordi);
}

/* Brand */
.header-brand {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  gap: .55rem;
  font-weight: 800;
  letter-spacing: .3px;
  line-height: 1;
}
.header-brand .fa-feather-pointed {
  font-size: 1.15rem;
  opacity: .9;
}
.brand-title {
  font-size: 1.05rem;
}

/* -----------------------------
   3.1 Toggle hamburger
   ----------------------------- */
.mobile-nav-toggle {
  grid-column: 1 / -1;
  justify-self: end;

  display: inline-flex;
  align-items: center;
  gap: .45rem;

  padding: .35rem .55rem;
  border: 1px solid var(--c-bordi);
  border-radius: .5rem;
  background: var(--c-superficie);
  cursor: pointer;

  font: inherit;
  line-height: 1;
  transition: background var(--t-quick), border-color var(--t-quick);
}
.mobile-nav-toggle:hover {
  background: color-mix(in srgb, var(--c-primario) 8%, transparent);
  border-color: color-mix(in srgb, var(--c-primario) 35%, var(--c-bordi));
}
.mobile-nav-toggle .fas {
  font-size: 1rem;
}

/* -----------------------------
   3.2 Nav principale
   ----------------------------- */
.main-nav {
  grid-column: 1 / -1;

  display: none;           /* chiusa su mobile */
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: .5rem .6rem;

  padding-block: .15rem .35rem;
}
.main-nav[data-visible="true"] {
  display: flex;
}

.main-nav a,
.main-nav button {
  display: inline-flex;
  align-items: center;
  gap: .35rem;

  padding: .5rem .7rem;
  border-radius: .5rem;
  border: 1px solid transparent;
  background: transparent;

  font: inherit;
  line-height: 1;
  text-decoration: none;
  color: var(--c-testo);

  cursor: pointer;
  transition: color var(--t-quick), background var(--t-quick), border-color var(--t-quick);
  white-space: nowrap;
}
.main-nav a:hover,
.main-nav button:hover {
  color: var(--c-primario);
  background: color-mix(in srgb, var(--c-primario) 9%, transparent);
}
.main-nav .is-active {
  color: var(--c-primario);
  text-decoration: underline;
  text-underline-offset: 4px;
}

/* -----------------------------
   3.3 Barra azioni (login/cta)
   ----------------------------- */
.header-actions {
  grid-column: 1 / -1;
  display: none; /* chiusa su mobile */
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: .5rem .6rem;
  padding-block: .35rem .6rem;
}
.header-actions[data-visible="true"] {
  display: flex;
}

.user-chip {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .35rem .6rem;
  border: 1px solid var(--c-bordi);
  border-radius: 999px;
  background: var(--c-superficie);
}
.chip-email {
  font-size: .85rem;
  color: var(--c-testo-leggero);
  max-width: 38ch;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* -----------------------------
   3.4 Breakpoint: ≥768px (tablet+)
   - Nav & actions sempre visibili
   - Brand al centro
   ----------------------------- */
@media (min-width: 768px) {
  .main-header {
    padding-block: .7rem;
    grid-template-columns: 1fr auto 1fr; /* nav - brand - actions */
    align-items: center;
  }

  .header-brand {
    grid-column: 2; /* centro visivo */
    justify-self: center;
  }
  .mobile-nav-toggle {
    display: none; /* hamburger sparisce */
  }

  .main-nav {
    grid-column: 1; /* a sinistra */
    display: flex !important;
    justify-content: flex-start;
    gap: .6rem;
  }

  .header-actions {
    grid-column: 3; /* a destra */
    display: flex !important;
    justify-content: flex-end;
    gap: .6rem;
  }

  .main-nav a,
  .main-nav button {
    padding: .45rem .65rem;
  }
}

/* -----------------------------
   3.5 Breakpoint: ≥1024px
   ----------------------------- */
@media (min-width: 1024px) {
  .main-header {
    padding-block: .85rem;
  }
  .main-nav {
    gap: .75rem;
  }
}

/* -----------------------------
   3.6 Tema scuro (opzionale)
   ----------------------------- */
@media (prefers-color-scheme: dark) {
  .main-header {
    background: color-mix(in srgb, var(--c-superficie) 88%, #000);
  }
  .mobile-nav-toggle {
    border-color: color-mix(in srgb, var(--c-bordi) 60%, #000);
  }
  .user-chip {
    background: color-mix(in srgb, var(--c-superficie) 85%, #000);
  }
}
