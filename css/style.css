
/* =========================================================
   THEITALIANPOETRY — STYLE.CSS (unificato e modulare)
   Separa in file seguendo i marker MODULE START/END
   ========================================================= */


/* =========================================================
   MODULE: base.css  — Design system, reset, helpers base
   ========================================================= */
/* == MODULE START: base.css == */
:root {
  /* Colori */
  --c-sfondo: #F9F9F9;
  --c-superficie: #FFFFFF;
  --c-primario: #2E7D32;
  --c-primario-hover: #256528;
  --c-secondario: #1e88e5;
  --c-secondario-hover: #166fbf;
  --c-testo: #222;
  --c-testo-leggero: #5f6368;
  --c-bordi: #e5e7eb;
  --c-stelle: #FFC107;
  --c-errore: #e53935;
  --c-successo: #43a047;
  --c-oro: #FFD700;
  --c-argento: #C0C0C0;
  --c-bronzo: #CD7F32;

  /* Raggi/Ombre */
  --r-8: 8px;
  --r-12: 12px;
  --r-16: 16px;
  --ombra-soft: 0 6px 20px rgba(0,0,0,.06);
  --ombra-card: 0 10px 24px rgba(0,0,0,.08);

  /* Spazi */
  --xs: .5rem;
  --sm: 1rem;
  --md: 1.5rem;
  --lg: 2rem;
  --xl: 2.5rem;

  /* Font */
  --font-body: system-ui, -apple-system, Segoe UI, Roboto, 'Open Sans', sans-serif;
  --font-heading: 'Montserrat', system-ui, sans-serif;

  /* Transizioni */
  --t: .18s ease;
}

/* Google Fonts (puoi spostare in <head>) */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Open+Sans:wght@400;600&display=swap');

/* Reset & base */
*,*::before,*::after { box-sizing: border-box; }
html { -webkit-text-size-adjust: 100%; scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: var(--font-body);
  color: var(--c-testo);
  background: var(--c-sfondo);
  line-height: 1.65;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
img,svg,video { max-width: 100%; height: auto; }
a { color: inherit; text-decoration: none; }

/* Accessibilità */
:focus-visible { outline: 3px solid color-mix(in oklab, var(--c-secondario) 70%, white); outline-offset: 2px; border-radius: 6px; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; }

/* Container & titoli */
.container { max-width: 1200px; margin: 0 auto; padding: 0 var(--sm); }
.content-area { display: flex; flex-direction: column; gap: var(--md); }
.section-title {
  font: 800 1.6rem/1.2 var(--font-heading);
  color: var(--c-primario);
  margin: var(--md) 0 var(--sm);
  position: relative; padding-bottom: .35rem;
}
.section-title::after {
  content: ""; position: absolute; left: 0; bottom: 0;
  width: 56px; height: 3px; border-radius: 2px; background: var(--c-primario);
}
/* == MODULE END: base.css == */



/* =========================================================
   MODULE: header.css — Header impilato + nav + chip/azioni
   ========================================================= */
/* == MODULE START: header.css == */
.main-header.main-header--stacked{
  position: sticky; top: 0; z-index: 1000;
  display: flex; flex-direction: column; align-items: center;
  gap: 12px; padding: 14px var(--sm);
  background: var(--c-superficie); border-bottom: 1px solid var(--c-bordi);
  box-shadow: 0 8px 18px rgba(0,0,0,.04);
}

/* Brand */
.header-brand{
  display: inline-flex; align-items: center; gap: 10px;
  color: var(--c-primario);
}
.header-brand .brand-title{
  font: 800 clamp(1.15rem, 2.2vw, 1.8rem)/1 var(--font-heading);
  letter-spacing: .2px;
}

/* Toggle mobile */
.mobile-nav-toggle{
  display: inline-flex; align-items: center; justify-content: center;
  gap: 8px; padding: 8px 10px; border: 0; border-radius: 999px;
  background: transparent; cursor: pointer; transition: background var(--t), color var(--t);
}
.mobile-nav-toggle:hover{ background: rgba(0,0,0,.05); color: var(--c-primario); }
@media (min-width: 768px){ .mobile-nav-toggle{ display: none; } }

/* Nav centrata */
.main-nav.main-nav--centered{
  display: flex; flex-wrap: wrap; justify-content: center; gap: 10px 16px;
}
.main-nav.main-nav--centered a,
.main-nav.main-nav--centered button{
  appearance: none; background: none; border: 0;
  padding: 8px 12px; border-radius: 8px; cursor: pointer;
  font: 600 .98rem/1.1 var(--font-body); color: var(--c-testo);
  text-decoration: none; transition: color var(--t), background var(--t);
}
.main-nav.main-nav--centered a:hover,
.main-nav.main-nav--centered button:hover{
  color: var(--c-primario);
  background: color-mix(in oklab, var(--c-primario) 10%, transparent);
}
.main-nav .is-active{
  color: var(--c-primario);
  text-decoration: underline; text-underline-offset: 4px;
}

/* Azioni */
.header-actions.header-actions--centered{
  display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;
}

/* Visibilità nav/azioni su mobile via [data-visible] */
@media (max-width: 767.98px){
  .main-nav[data-visible="false"], .header-actions[data-visible="false"]{ display: none; }
  .main-nav[data-visible="true"], .header-actions[data-visible="true"]{ display: flex; }
}

/* User chip */
.user-chip{
  display: inline-flex; align-items: center; gap: 8px;
  padding: 4px 10px; border: 1px solid var(--c-bordi); border-radius: 999px; background: #fff;
}
.chip-email{ font-size: .85rem; color: var(--c-testo-leggero); max-width: 36ch; overflow: hidden; text-overflow: ellipsis; }
/* == MODULE END: header.css == */



/* =========================================================
   MODULE: buttons.css — Stili pulsanti riutilizzabili
   ========================================================= */
/* == MODULE START: buttons.css == */
.button{
  display: inline-flex; align-items: center; justify-content: center; gap: .45rem;
  padding: .65rem 1rem; border-radius: 999px; border: 0; cursor: pointer;
  font: 700 .95rem var(--font-body); transition: background var(--t), color var(--t), box-shadow var(--t);
}
.button-primary{ background: var(--c-primario); color: #fff; }
.button-primary:hover{ background: var(--c-primario-hover); }
.button-secondary{ background: #fff; border: 2px solid var(--c-bordi); color: var(--c-testo-leggero); }
.button-secondary:hover{ border-color: var(--c-primario); color: var(--c-primario); }
.button-social.google{ background: #4285F4; color: #fff; }
.button-social.google:hover{ background: #3b78e7; }
/* == MODULE END: buttons.css == */



/* =========================================================
   MODULE: home.css — Classifica Top10 + sidebar mese
   ========================================================= */
/* == MODULE START: home.css == */
.poems-list{ display: flex; flex-direction: column; gap: var(--sm); }

.poem-row{
  background: var(--c-superficie);
  border: 1px solid color-mix(in oklab, currentColor 10%, transparent);
  border-radius: var(--r-16);
  box-shadow: var(--ombra-soft);
  padding: var(--sm);
  display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between;
  transition: transform var(--t), box-shadow var(--t), border-color var(--t);
}
.poem-row:hover{ transform: translateY(-2px); box-shadow: var(--ombra-card); border-color: color-mix(in oklab, currentColor 18%, transparent); }

.poem-info{ display: flex; align-items: center; gap: .75rem; flex: 1; min-width: 220px; }
.poem-rank{ font-size: 1.2rem; }
.poem-title{ font-weight: 700; }
.poem-author{ font-style: italic; color: var(--c-testo-leggero); }
.golden-author{ color: #DAA520; font-weight: 700; }
.glow-rank{ animation: glow 2s ease-in-out infinite alternate; }

.poem-actions{ display: flex; align-items: center; gap: .6rem; }
.social-icon{ color: var(--c-testo-leggero); transition: color var(--t); text-decoration: none; }
.social-icon:hover{ color: var(--c-primario); }
.poem-votes{ color: var(--c-testo-leggero); font-weight: 600; }
.button-vote{ padding: .5rem 1rem; border-radius: 999px; border: 0; background: var(--c-primario); color: #fff; font-weight: 700; }
.button-vote:hover{ background: var(--c-primario-hover); }

/* Toolbar */
.diario-toolbar{
  display: grid; grid-template-columns: 1fr; gap: var(--xs); margin: .5rem 0 var(--md);
}
.search-input, .filter-select{
  width: 100%;
  padding: .8rem .9rem;
  border: 1px solid var(--c-bordi); border-radius: var(--r-12);
  background: #fff; color: var(--c-testo);
  transition: border-color var(--t), box-shadow var(--t);
}
.search-input:focus, .filter-select:focus{ border-color: var(--c-primario); box-shadow: 0 0 0 3px rgba(46,125,50,.15); }

/* Sidebar mese */
.sidebar-box{
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--r-16);
  box-shadow: var(--ombra-soft);
  padding: var(--sm);
}
.sidebar-box h3{
  color: var(--c-primario);
  font: 800 1.2rem var(--font-heading);
  margin-bottom: var(--xs);
  position: relative; padding-bottom: .3rem;
}
.sidebar-box h3::after{ content:""; position:absolute; left:0; bottom:0; width:40px; height:3px; background:var(--c-primario); border-radius:2px; }

.mini-poems-list{ display: flex; flex-direction: column; gap: .35rem; max-height: 320px; overflow: auto; padding-right: .35rem; }
.mini-poem-item{ padding: .35rem .4rem; border-bottom: 1px solid var(--c-bordi); border-radius: 8px; cursor: pointer; transition: background var(--t); }
.mini-poem-item:hover{ background: rgba(0,0,0,.03); }
.mini-poem-title{ font-weight: 700; display:block; }
.mini-poem-author,.mini-poem-date{ font-size: .85rem; color: var(--c-testo-leggero); }
/* == MODULE END: home.css == */



/* =========================================================
   MODULE: modal.css — Modale di voto/dettaglio
   ========================================================= */
/* == MODULE START: modal.css == */
.modal-backdrop{
  position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
  background: rgba(34,34,34,.6); backdrop-filter: blur(5px);
  padding: var(--sm); z-index: 1200;
}
.modal-content{
  background: #fff; width: 100%; max-width: 620px;
  border-radius: var(--r-16); border: 1px solid var(--c-bordi);
  box-shadow: var(--ombra-card); padding: var(--md); position: relative;
  animation: slideDown .24s ease;
}
.modal-close-btn{
  position: absolute; top: 10px; right: 10px;
  width: 36px; height: 36px; border-radius: 999px; border: 0; background: #fff;
  display: grid; place-items: center; color: var(--c-testo-leggero); cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
}
.modal-close-btn:hover{ color: var(--c-primario); background: rgba(0,0,0,.05); }

/* Rating */
.star-rating{ display: flex; justify-content: center; gap: .35rem; margin: .8rem 0 1rem; }
.star{ cursor: pointer; font-size: 1.6rem; color: #ddd; transition: transform var(--t), color var(--t); }
.star i.selected{ color: var(--c-stelle); }
.star:hover{ transform: translateY(-2px); }

/* Messaggi form */
#vote-form-message{ font-weight: 700; color: var(--c-testo-leggero); }
#vote-form-message.success{ color: var(--c-successo); }
#vote-form-message.error{ color: var(--c-errore); }
/* == MODULE END: modal.css == */



/* =========================================================
   MODULE: diario.css — Cards elenco autori + dettagli
   ========================================================= */
/* == MODULE START: diario.css == */
.diario-section{
  background: var(--c-superficie);
  border: 1px solid var(--c-bordi);
  border-radius: var(--r-16);
  box-shadow: var(--ombra-soft);
  padding: var(--md);
  margin: var(--md) 0;
}
.authors-grid{ display: grid; grid-template-columns: 1fr; gap: var(--md); }

.author-card{
  background: #fff; border: 1px solid var(--c-bordi); border-radius: var(--r-16);
  box-shadow: var(--ombra-soft); overflow: hidden;
  transition: transform var(--t), box-shadow var(--t), border-color var(--t);
}
.author-card:hover{ transform: translateY(-2px); box-shadow: var(--ombra-card); border-color: color-mix(in oklab, currentColor 16%, transparent); }

.author-card__header{
  display: grid; grid-template-columns: auto 1fr auto; align-items: center;
  gap: var(--sm); padding: var(--sm);
}
.author-card__avatar{
  width: 56px; height: 56px; border-radius: 50%;
  background: #eee center/cover no-repeat; border: 1px solid var(--c-bordi);
}
.author-card__name{ font: 800 1.05rem/1.2 var(--font-heading); }
.author-card__id{ font-size: .78rem; color: var(--c-testo-leggero); word-break: break-all; }

.author-card__badges{ display:flex; gap:6px; }
.badge{
  display:inline-block; padding: 4px 8px; font: 700 .72rem/1 var(--font-body);
  border: 1px solid var(--c-bordi); border-radius: 999px; color: var(--c-testo-leggero); background:#fff;
}

.author-card__meta{
  display: grid; grid-template-columns: 1fr auto; gap: var(--xs);
  padding: 0 var(--sm) var(--xs); color: var(--c-testo-leggero);
}
.meta-row{ display:flex; flex-wrap:wrap; gap:8px; }
.meta-pill{ background: #f7f7f7; border: 1px solid var(--c-bordi); border-radius: 999px; padding: 4px 10px; font-size: .8rem; color: var(--c-testo); }

.journal-preview{ padding: var(--sm); border-top: 1px dashed var(--c-bordi); }
.journal-preview__text{
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
  color: var(--c-testo-leggero);
}

.author-card__footer{
  display:flex; align-items:center; justify-content:space-between; gap: var(--xs);
  padding: var(--sm); border-top:1px solid var(--c-bordi); background:#fcfcfc;
}
.author-card__actions{ display:flex; gap:8px; flex-wrap:wrap; }
.author-card__qr{
  width:64px; height:64px; border:1px solid var(--c-bordi); border-radius: 8px;
  background:#fff center/contain no-repeat; flex:0 0 64px;
}

/* Dettagli espandibili */
.journal-details{ max-height:0; opacity:.0; overflow:hidden; border-top:1px solid var(--c-bordi); background:#fff; transition: max-height .45s ease, opacity .25s ease; }
.journal-details.is-open{ max-height: 1200px; opacity: 1; }
.journal-details__inner{ padding: var(--sm); display:grid; gap: var(--sm); }
.journal-block{ background:#fafafa; border:1px solid var(--c-bordi); border-radius: var(--r-12); padding: var(--sm); }
.journal-block h4{ font: 800 1rem var(--font-heading); color: var(--c-primario); margin: 0 0 .4rem; }
.journal-tags{ display:flex; flex-wrap:wrap; gap:8px; }
.journal-tag{ font-size: .78rem; padding: 4px 8px; border: 1px solid var(--c-bordi); border-radius:999px; background:#fff; color: var(--c-testo-leggero); }

.diario-empty, .diario-error{
  display:grid; place-items:center; min-height: 140px; border:2px dashed var(--c-bordi);
  border-radius: var(--r-12); color: var(--c-testo-leggero); padding: var(--sm);
}

/* Skeleton */
.skel{
  background: linear-gradient(90deg, #eee 25%, #f6f6f6 37%, #eee 63%);
  background-size: 400% 100%; animation: skel 1.4s ease infinite; border-radius: 8px;
}
@keyframes skel{ 0%{ background-position: 100% 50%; } 100%{ background-position: 0 50%; } }
/* == MODULE END: diario.css == */



/* =========================================================
   MODULE: forms.css — Campi, select, textarea
   ========================================================= */
/* == MODULE START: forms.css == */
.form-group{ margin-bottom: var(--sm); }
.form-group label{ display:block; margin-bottom: .4rem; font-weight: 700; color: var(--c-testo); }
.form-group input,.form-group textarea,.form-group select{
  width: 100%; padding: .85rem .9rem;
  border: 1px solid var(--c-bordi); border-radius: var(--r-12);
  background: #fff; color: var(--c-testo); transition: border-color var(--t), box-shadow var(--t);
  font: .95rem var(--font-body);
}
.form-group textarea{ min-height: 130px; resize: vertical; }
.form-group input:focus,.form-group textarea:focus,.form-group select:focus{
  border-color: var(--c-primario); box-shadow: 0 0 0 3px rgba(46,125,50,.13);
}
/* == MODULE END: forms.css == */



/* =========================================================
   MODULE: utilities.css — Utility & helper classes
   ========================================================= */
/* == MODULE START: utilities.css == */
.text-center{ text-align: center; }
.hidden{ display:none !important; }
.mt-xs{ margin-top: var(--xs); } .mt-sm{ margin-top: var(--sm); } .mt-md{ margin-top: var(--md); }
.mb-xs{ margin-bottom: var(--xs); } .mb-sm{ margin-bottom: var(--sm); } .mb-md{ margin-bottom: var(--md); }
/* == MODULE END: utilities.css == */



/* =========================================================
   MODULE: animations.css — Effetti e keyframes
   ========================================================= */
/* == MODULE START: animations.css == */
@keyframes slideDown{ from{ opacity:0; transform: translateY(-8px);} to{ opacity:1; transform:none; } }
@keyframes glow{
  from{ text-shadow: 0 0 5px rgba(255,215,0,.45), 0 0 10px rgba(255,215,0,.25); }
  to  { text-shadow: 0 0 10px rgba(255,215,0,.75), 0 0 20px rgba(255,215,0,.45); }
}
/* == MODULE END: animations.css == */



/* =========================================================
   MODULE: responsive.css — Adattamenti per breakpoint
   ========================================================= */
/* == MODULE START: responsive.css == */
/* Tablet ≥768 */
@media (min-width: 768px){
  .container{ padding: 0 var(--md); }
  .diario-toolbar{ grid-template-columns: 1fr 220px; align-items: center; }
  .authors-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .poems-list{ gap: var(--md); }
}

/* Desktop ≥1024 */
@media (min-width: 1024px){
  .authors-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .poem-row{ padding: var(--md); }
}

/* Large ≥1440 */
@media (min-width: 1440px){
  .authors-grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
}
/* == MODULE END: responsive.css == */
